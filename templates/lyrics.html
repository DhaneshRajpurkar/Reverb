<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reverb: Lyric Analyzer</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to right bottom, #1a202c, #2d3748);
            color: #e2e8f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
            padding: 20px;
        }
        .container {
            @apply bg-gray-800 p-8 rounded-3xl shadow-2xl max-w-lg w-full flex flex-col items-center;
        }
        .back-button {
            @apply absolute top-5 left-5 text-indigo-400 hover:text-indigo-300 font-bold transition-colors duration-200;
        }
        .title {
            @apply text-4xl font-bold mb-4 text-indigo-400;
        }
        .subtitle {
            @apply text-lg text-gray-400 mb-8;
        }
        .form-group {
            @apply mb-4 w-full;
        }
        .form-label {
            @apply block text-sm font-semibold mb-2 text-gray-300;
        }
        .form-input {
            @apply w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:border-indigo-500 focus:ring focus:ring-indigo-500 focus:ring-opacity-50 transition-colors;
        }
        .submit-button {
            @apply w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-75;
        }
        .result-box {
            @apply mt-8 w-full p-6 bg-gray-700 rounded-2xl shadow-inner;
        }
        .sentiment-score {
            @apply text-center text-xl font-bold mb-2;
        }
        .mood-indicator {
            @apply text-center text-2xl font-bold mt-4;
        }
        .wordcloud-img {
            @apply w-full h-auto mt-6 rounded-xl border border-gray-600;
        }
        .error-message {
            @apply text-red-400 text-center mt-4;
        }
    </style>
</head>
<body class="antialiased">
    <a href="{{ url_for('main_index') }}" class="back-button">‚Üê Back to Main Hub</a>
    <div class="container">
        <h1 class="title">Lyric Analyzer</h1>
        <p class="subtitle">Enter a song title and artist to analyze its mood!</p>

        <form action="{{ url_for('lyrics_analyzer_page') }}" method="POST" class="w-full">
            <div class="form-group">
                <label for="song_title" class="form-label">Song Title:</label>
                <input type="text" id="song_title" name="song_title" class="form-input" placeholder="e.g., Bohemian Rhapsody" required>
            </div>
            <div class="form-group">
                <label for="artist_name" class="form-label">Artist Name:</label>
                <input type="text" id="artist_name" name="artist_name" class="form-input" placeholder="e.g., Queen" required>
            </div>
            <button type="submit" class="submit-button">Analyze Lyrics</button>
        </form>

        {% if error %}
            <p class="error-message">{{ error }}</p>
        {% endif %}

        {% if sentiment %}
        <div class="result-box">
            <h2 class="text-2xl font-semibold text-indigo-400 mb-4 text-center">Analysis Results</h2>
            <p class="text-lg font-medium text-gray-300">
                Overall Mood: <span class="mood-indicator">{{ mood }}</span>
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div class="p-3 bg-gray-800 rounded-lg shadow-sm">
                    <p class="sentiment-score text-green-400">Positive: {{ "%.2f"|format(sentiment['pos']) }}</p>
                </div>
                <div class="p-3 bg-gray-800 rounded-lg shadow-sm">
                    <p class="sentiment-score text-red-400">Negative: {{ "%.2f"|format(sentiment['neg']) }}</p>
                </div>
                <div class="p-3 bg-gray-800 rounded-lg shadow-sm col-span-1 md:col-span-2">
                    <p class="sentiment-score text-yellow-400">Neutral: {{ "%.2f"|format(sentiment['neu']) }}</p>
                </div>
            </div>
            {% if wordcloud_image %}
                <h3 class="text-xl font-semibold text-gray-300 mt-6 mb-4 text-center">Word Cloud</h3>
                <img src="data:image/png;base64,{{ wordcloud_image }}" alt="Sentiment Word Cloud" class="wordcloud-img">
            {% endif %}
        </div>
        {% endif %}
    </div>
</body>
</html>
